{"ast":null,"code":"import axios from'axios';import React,{useEffect}from'react';import{getUserInfo}from'../api/getUserInfo';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const KakaoAuthHandle=props=>{useEffect(()=>{const kakaoLogin=async()=>{try{let code=new URL(window.location.href).searchParams.get('code');const res=await axios.get(\"/v1/oauth/login/kakao?code=\".concat(code),{headers:{'Accept':'application/json','Content-Type':'application/json'},crossDomain:true});console.log(\"카카오 로그인 header: \",res.headers);console.log(\"카카오 로그인 auth: \",res.headers.authorization);localStorage.setItem('token',res.headers.authorization);const userInfo=await getUserInfo();// window.location.href = `/${userInfo.userId}`;\n}catch(error){if(error.response){console.error('에러의 응답:',error.response);//do something\n}else if(error.request){console.error('에러의 요청:',error.request);//do something else\n}else if(error.message){console.error('에러의 메시지:',error.message);//do something other than the other two\n}}};kakaoLogin();},[props.history]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uB85C\\uADF8\\uC778 \\uC911\\uC785\\uB2C8\\uB2E4...\"})});};export default KakaoAuthHandle;","map":{"version":3,"names":["axios","React","useEffect","getUserInfo","jsx","_jsx","Fragment","_Fragment","KakaoAuthHandle","props","kakaoLogin","code","URL","window","location","href","searchParams","get","res","concat","headers","crossDomain","console","log","authorization","localStorage","setItem","userInfo","error","response","request","message","history","children"],"sources":["C:/Users/PC/Desktop/mumul_frontend/mumul/src/component/KakaoAuthHandle.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect } from 'react';\r\nimport { getUserInfo } from '../api/getUserInfo';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst KakaoAuthHandle = (props) => {\r\n  useEffect(() => {\r\n    const kakaoLogin = async () => {\r\n      try {\r\n      let code=new URL(window.location.href).searchParams.get('code');\r\n        const res = await axios.get(`/v1/oauth/login/kakao?code=${code}`,\r\n        {\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n          },\r\n          crossDomain: true,\r\n        });\r\n\r\n        console.log(\"카카오 로그인 header: \",res.headers);\r\n        console.log(\"카카오 로그인 auth: \",res.headers.authorization);\r\n        localStorage.setItem('token', res.headers.authorization);\r\n        const userInfo = await getUserInfo();\r\n       // window.location.href = `/${userInfo.userId}`;\r\n      } catch (error) {\r\n        if (error.response) {\r\n          console.error('에러의 응답:', error.response);\r\n          //do something\r\n\r\n      } else if (error.request) {\r\n          console.error('에러의 요청:', error.request);\r\n          //do something else\r\n\r\n      } else if (error.message) {\r\n          console.error('에러의 메시지:', error.message);\r\n          //do something other than the other two\r\n\r\n      }\r\n      }\r\n    };\r\n    kakaoLogin();\r\n  }, [props.history]);\r\n\r\n  return (\r\n    <>\r\n    <p>로그인 중입니다...</p>\r\n    </>\r\n  );\r\n};\r\n\r\nKakaoAuthHandle.propTypes = {\r\n  history: PropTypes.object.isRequired,\r\n};\r\n\r\n\r\nexport default KakaoAuthHandle;\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAGjD,KAAM,CAAAC,eAAe,CAAIC,KAAK,EAAK,CACjCP,SAAS,CAAC,IAAM,CACd,KAAM,CAAAQ,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACJ,GAAI,CAAAC,IAAI,CAAC,GAAI,CAAAC,GAAG,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC,CAACC,YAAY,CAACC,GAAG,CAAC,MAAM,CAAC,CAC7D,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAlB,KAAK,CAACiB,GAAG,+BAAAE,MAAA,CAA+BR,IAAI,EAC9D,CACES,OAAO,CAAE,CACP,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBAClB,CAAC,CACDC,WAAW,CAAE,IACf,CAAC,CAAC,CAEFC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAACL,GAAG,CAACE,OAAO,CAAC,CAC3CE,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAACL,GAAG,CAACE,OAAO,CAACI,aAAa,CAAC,CACvDC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAER,GAAG,CAACE,OAAO,CAACI,aAAa,CAAC,CACxD,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAxB,WAAW,CAAC,CAAC,CACrC;AACD,CAAE,MAAOyB,KAAK,CAAE,CACd,GAAIA,KAAK,CAACC,QAAQ,CAAE,CAClBP,OAAO,CAACM,KAAK,CAAC,SAAS,CAAEA,KAAK,CAACC,QAAQ,CAAC,CACxC;AAEJ,CAAC,IAAM,IAAID,KAAK,CAACE,OAAO,CAAE,CACtBR,OAAO,CAACM,KAAK,CAAC,SAAS,CAAEA,KAAK,CAACE,OAAO,CAAC,CACvC;AAEJ,CAAC,IAAM,IAAIF,KAAK,CAACG,OAAO,CAAE,CACtBT,OAAO,CAACM,KAAK,CAAC,UAAU,CAAEA,KAAK,CAACG,OAAO,CAAC,CACxC;AAEJ,CACA,CACF,CAAC,CACDrB,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACD,KAAK,CAACuB,OAAO,CAAC,CAAC,CAEnB,mBACE3B,IAAA,CAAAE,SAAA,EAAA0B,QAAA,cACA5B,IAAA,MAAA4B,QAAA,CAAG,gDAAW,CAAG,CAAC,CAChB,CAAC,CAEP,CAAC,CAOD,cAAe,CAAAzB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}