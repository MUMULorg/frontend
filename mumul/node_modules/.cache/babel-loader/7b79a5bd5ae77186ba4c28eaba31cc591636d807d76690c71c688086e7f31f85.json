{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Header from\"../component/Header\";import NoneMember from\"../component/popup/NoneMember\";import{getUserInfo}from\"../api/getUserInfo\";import{putStopSpace}from\"../api/User/putStopSpace\";import{putAlertSpace}from\"../api/User/putAlertSpace\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Setting(_ref){let{isLogin,setIsLogin}=_ref;const[settingModal,setSettingModal]=useState(false);const[currentUserInfo,setCurrentUserInfo]=useState({userId:'',picture:'',name:'',email:'',introduce:'',instaId:'',link:'',stopSpace:false,alertSpace:false});useEffect(()=>{const getCurrentUserInfo=async()=>{const token=localStorage.getItem('token');if(token!==null){const userInfo=await getUserInfo();setCurrentUserInfo(userInfo);}};getCurrentUserInfo();},[]);const onOpenModal=()=>{setSettingModal(true);};const onClose=()=>{setSettingModal(false);};const handleSwitchToggle=async()=>{try{await putStopSpace(currentUserInfo.userId,!currentUserInfo.stopSpace);setCurrentUserInfo(prevState=>({...prevState,stopSpace:!prevState.stopSpace}));}catch(error){console.error(\"Error toggling stopSpace:\",error);}};const handleAlertSwitchToggle=async()=>{try{await putAlertSpace(currentUserInfo.userId,!currentUserInfo.alertSpace);setCurrentUserInfo(prevState=>({...prevState,alertSpace:!prevState.alertSpace}));}catch(error){console.error(\"Error toggling stopSpace:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"wrap\",children:[/*#__PURE__*/_jsx(Header,{isLogin:isLogin,setIsLogin:setIsLogin,currentUserInfo:currentUserInfo,onChange:handleSwitchToggle}),/*#__PURE__*/_jsxs(\"div\",{className:\"contentWrap setting\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"switchWrap\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"label\",children:\"\\uC774\\uBA54\\uC77C \\uC54C\\uB9BC\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC9C8\\uBB38, \\uB2F5\\uBCC0\\uC774 \\uB3C4\\uCC29\\uD558\\uBA74 \\uC544\\uB798 \\uC774\\uBA54\\uC77C\\uB85C \\uC54C\\uB824\\uC918\\uC694\"}),/*#__PURE__*/_jsx(\"p\",{className:\"email\",children:currentUserInfo.email})]}),/*#__PURE__*/_jsx(\"div\",{className:\"switch\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:currentUserInfo.alertSpace,onChange:handleAlertSwitchToggle}),/*#__PURE__*/_jsx(\"span\",{className:\"slider round\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"switchWrap\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"label\",children:\"\\uC2A4\\uD398\\uC774\\uC2A4 \\uC77C\\uC2DC \\uC911\\uC9C0\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0AC\\uB78C\\uB4E4\\uB85C\\uBD80\\uD130 \\uC9C8\\uBB38\\uC744 \\uBC1B\\uC9C0 \\uC54A\\uC544\\uC694\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"switch\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:currentUserInfo.stopSpace,onChange:handleSwitchToggle}),/*#__PURE__*/_jsx(\"span\",{className:\"slider round\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"label\",children:\"\\uACC4\\uC815 \\uAD00\\uB9AC\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btnRed nonMemberBtn\",onClick:onOpenModal,children:\"\\uD68C\\uC6D0 \\uD0C8\\uD1F4\"})]})]}),settingModal&&/*#__PURE__*/_jsx(NoneMember,{currentUserInfo:currentUserInfo,onClose:onClose,setIsLogin:setIsLogin})]});}export default Setting;","map":{"version":3,"names":["React","useEffect","useState","Header","NoneMember","getUserInfo","putStopSpace","putAlertSpace","jsx","_jsx","jsxs","_jsxs","Setting","_ref","isLogin","setIsLogin","settingModal","setSettingModal","currentUserInfo","setCurrentUserInfo","userId","picture","name","email","introduce","instaId","link","stopSpace","alertSpace","getCurrentUserInfo","token","localStorage","getItem","userInfo","onOpenModal","onClose","handleSwitchToggle","prevState","error","console","handleAlertSwitchToggle","className","children","onChange","type","checked","onClick"],"sources":["C:/Users/PC/Desktop/mumul_frontend/mumul/src/pages/Setting.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Header from \"../component/Header\";\r\nimport NoneMember from \"../component/popup/NoneMember\";\r\nimport { getUserInfo } from \"../api/getUserInfo\";\r\nimport { putStopSpace } from \"../api/User/putStopSpace\";\r\nimport { putAlertSpace } from \"../api/User/putAlertSpace\"; \r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Setting({isLogin, setIsLogin}) {\r\n  const [settingModal, setSettingModal] = useState(false);\r\n  const [currentUserInfo, setCurrentUserInfo] = useState({\r\n    userId: '',\r\n    picture: '',\r\n    name: '',\r\n    email: '',\r\n    introduce: '',\r\n    instaId: '',\r\n    link: '',\r\n    stopSpace: false,\r\n    alertSpace: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const getCurrentUserInfo = async () => {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if(token !== null) {\r\n        const userInfo = await getUserInfo();\r\n        setCurrentUserInfo(userInfo);\r\n      }\r\n    };\r\n    getCurrentUserInfo();\r\n  }, []);\r\n\r\n  const onOpenModal = () => {\r\n    setSettingModal(true);\r\n  };\r\n\r\n  const onClose = () => {\r\n    setSettingModal(false);\r\n  };\r\n\r\n  const handleSwitchToggle = async () => {\r\n    try {\r\n      await putStopSpace(currentUserInfo.userId, !currentUserInfo.stopSpace);\r\n      setCurrentUserInfo(prevState => ({\r\n        ...prevState,\r\n        stopSpace: !prevState.stopSpace\r\n      }));\r\n    } catch (error) {\r\n      console.error(\"Error toggling stopSpace:\", error);\r\n    }\r\n  };\r\n\r\n  const handleAlertSwitchToggle = async () => {\r\n    try {\r\n      await putAlertSpace(currentUserInfo.userId, !currentUserInfo.alertSpace);\r\n      setCurrentUserInfo(prevState => ({\r\n        ...prevState,\r\n        alertSpace: !prevState.alertSpace\r\n      }));\r\n    } catch (error) {\r\n      console.error(\"Error toggling stopSpace:\", error);\r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"wrap\">\r\n      <Header isLogin={isLogin} setIsLogin={setIsLogin} currentUserInfo={currentUserInfo} onChange={handleSwitchToggle}></Header>\r\n      <div className=\"contentWrap setting\">\r\n        <div className=\"switchWrap\">\r\n          <div>\r\n            <p className=\"label\">이메일 알림</p>\r\n            <p>질문, 답변이 도착하면 아래 이메일로 알려줘요</p>\r\n            <p className=\"email\">{currentUserInfo.email}</p>\r\n          </div>\r\n          <div className=\"switch\">\r\n            <label className=\"switch\">\r\n              <input type=\"checkbox\" checked={currentUserInfo.alertSpace} onChange={handleAlertSwitchToggle}/>\r\n              <span className=\"slider round\"></span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <div className=\"switchWrap\">\r\n          <div>\r\n            <p className=\"label\">스페이스 일시 중지</p>\r\n            <p>사람들로부터 질문을 받지 않아요</p>\r\n          </div>\r\n          <div className=\"switch\">\r\n            <label className=\"switch\">\r\n              <input type=\"checkbox\" checked={currentUserInfo.stopSpace} onChange={handleSwitchToggle}/>\r\n              <span className=\"slider round\"></span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <p className=\"label\">계정 관리</p>\r\n          <button className=\"btnRed nonMemberBtn\" onClick={onOpenModal}>\r\n            회원 탈퇴\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {settingModal && <NoneMember currentUserInfo={currentUserInfo} onClose={onClose} setIsLogin={setIsLogin}></NoneMember>}\r\n    </div>\r\n  );\r\n}\r\n\r\nSetting.propTypes={\r\n  isLogin: PropTypes.any.isRequired,\r\n  setIsLogin: PropTypes.any.isRequired,\r\n}\r\n\r\nexport default Setting;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}