{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Close from\"../../img/icon/close.png\";import tokki1 from\"../../img/Ellipse 102.png\";import tokki2 from\"../../img/Ellipse 103.png\";import tokki3 from\"../../img/Ellipse 104.png\";import tokki4 from\"../../img/Ellipse 105.png\";import tokki5 from\"../../img/Ellipse 106.png\";import tokki6 from\"../../img/Ellipse 107.png\";import tokki7 from\"../../img/Ellipse 108.png\";import tokki8 from\"../../img/Ellipse 109.png\";import tokki9 from\"../../img/Ellipse 110.png\";import tokki10 from\"../../img/Ellipse 111.png\";import{useParams}from\"react-router-dom\";import{createQuestion}from\"../../api/Q&A/createQuestion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function QuestionRegister(_ref){let{info,currentUserInfo,onClose}=_ref;const{id}=useParams();let[inputCount,setInputCount]=useState(0);const[btn,setBtn]=useState(true);const[questionText,setQuestionText]=useState(\"\");// 질문 텍스트를 저장하기 위한 state 변수\nconst[randomImage,setRandomImage]=useState(\"\");// 랜덤 이미지를 저장하기 위한 state 변수\nuseEffect(()=>{randomizeImage();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[btn]);const clickOpenBtn=()=>{setBtn(!btn);randomizeImage();};const randomizeImage=()=>{const tokkiImages=[tokki1,tokki2,tokki3,tokki4,tokki5,tokki6,tokki7,tokki8,tokki9,tokki10];if(btn){const randomIndex=Math.floor(Math.random()*tokkiImages.length);setRandomImage(tokkiImages[randomIndex]);}else{setRandomImage(currentUserInfo.picture);}};const onTextareaHandler=e=>{setInputCount(e.target.value.length);setQuestionText(e.target.value);};// 질문 등록하는 API\nconst registerQuestion=async()=>{try{await createQuestion(info,id,currentUserInfo,questionText,btn,randomImage);onClose();// 질문 등록 후 팝업을 닫습니다.\nwindow.location.reload();}catch(error){if(error.response&&error.response.status===401){console.error(\"로그인이 필요합니다.\");// 로그인이 필요한 경우에 대한 처리를 추가합니다.\n}else{console.error(\"질문 등록에 실패함:\",error);// 필요한 에러 처리 로직을 추가합니다.\n}}};return/*#__PURE__*/_jsx(\"div\",{className:\"popupWrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"popup registerPopup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popupContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"popupHeader\",children:/*#__PURE__*/_jsx(\"img\",{src:Close,alt:\"close\",onClick:onClose})}),/*#__PURE__*/_jsxs(\"div\",{className:\"popupContent\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:randomImage,alt:\"profile\"})}),/*#__PURE__*/_jsx(\"div\",{children:btn?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"myId\",children:\"\\uC775\\uBA85\\uC758 \\uD1A0\\uB07C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"openBtn\",onClick:clickOpenBtn,children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"link\",children:\"\\uD83D\\uDC30 \\uD1A0\\uB07C\\uB85C \\uB179\\uC544\\uB4E4\\uAE30\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"myId\",children:currentUserInfo.name}),/*#__PURE__*/_jsx(\"button\",{className:\"openBtn\",onClick:clickOpenBtn,children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"link\",children:\"\\uD83D\\uDC64 \\uACF5\\uAC1C \\uBB34\\uBB3C\\uD558\\uAE30\"})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:/*#__PURE__*/_jsx(\"textarea\",{maxLength:\"500\",onChange:onTextareaHandler})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"popupFooter\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"countNum\",children:[/*#__PURE__*/_jsx(\"span\",{children:inputCount}),/*#__PURE__*/_jsx(\"span\",{children:\"/500\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btnSave\",onClick:registerQuestion,children:\"\\uB0A8\\uAE30\\uAE30\"})]})]})})});}export default QuestionRegister;","map":{"version":3,"names":["React","useState","useEffect","Close","tokki1","tokki2","tokki3","tokki4","tokki5","tokki6","tokki7","tokki8","tokki9","tokki10","useParams","createQuestion","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","QuestionRegister","_ref","info","currentUserInfo","onClose","id","inputCount","setInputCount","btn","setBtn","questionText","setQuestionText","randomImage","setRandomImage","randomizeImage","clickOpenBtn","tokkiImages","randomIndex","Math","floor","random","length","picture","onTextareaHandler","e","target","value","registerQuestion","window","location","reload","error","response","status","console","className","children","src","alt","onClick","role","name","maxLength","onChange"],"sources":["C:/Users/PC/Desktop/mumul_frontend/mumul/src/component/popup/QuestionRegister.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Close from \"../../img/icon/close.png\";\r\nimport tokki1 from \"../../img/Ellipse 102.png\";\r\nimport tokki2 from \"../../img/Ellipse 103.png\";\r\nimport tokki3 from \"../../img/Ellipse 104.png\";\r\nimport tokki4 from \"../../img/Ellipse 105.png\";\r\nimport tokki5 from \"../../img/Ellipse 106.png\";\r\nimport tokki6 from \"../../img/Ellipse 107.png\";\r\nimport tokki7 from \"../../img/Ellipse 108.png\";\r\nimport tokki8 from \"../../img/Ellipse 109.png\";\r\nimport tokki9 from \"../../img/Ellipse 110.png\";\r\nimport tokki10 from \"../../img/Ellipse 111.png\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { createQuestion } from \"../../api/Q&A/createQuestion\";\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction QuestionRegister({ info, currentUserInfo, onClose }) {\r\n  const { id } = useParams();\r\n  let [inputCount, setInputCount] = useState(0);\r\n  const [btn, setBtn] = useState(true);\r\n  const [questionText, setQuestionText] = useState(\"\"); // 질문 텍스트를 저장하기 위한 state 변수\r\n  const [randomImage, setRandomImage] = useState(\"\"); // 랜덤 이미지를 저장하기 위한 state 변수\r\n\r\n  useEffect(() => {\r\n    randomizeImage();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [btn]);\r\n\r\n  const clickOpenBtn = () => {\r\n    setBtn(!btn);\r\n    randomizeImage();\r\n  };\r\n\r\n  const randomizeImage = () => {\r\n    const tokkiImages = [tokki1, tokki2, tokki3, tokki4, tokki5, tokki6, tokki7, tokki8, tokki9, tokki10];\r\n    if (btn) {\r\n      const randomIndex = Math.floor(Math.random() * tokkiImages.length);\r\n      setRandomImage(tokkiImages[randomIndex]);\r\n    } else {\r\n      setRandomImage(currentUserInfo.picture);\r\n    }\r\n  };\r\n\r\n\r\n  const onTextareaHandler = (e) => {\r\n    setInputCount(e.target.value.length);\r\n    setQuestionText(e.target.value);\r\n  };\r\n\r\n  // 질문 등록하는 API\r\n  const registerQuestion = async () => {\r\n    try {\r\n      await createQuestion(info, id, currentUserInfo, questionText, btn,randomImage);\r\n      onClose(); // 질문 등록 후 팝업을 닫습니다.\r\n      window.location.reload();\r\n    } catch (error) {\r\n      if (error.response && error.response.status === 401) {\r\n        console.error(\"로그인이 필요합니다.\");\r\n        // 로그인이 필요한 경우에 대한 처리를 추가합니다.\r\n      } else {\r\n        console.error(\"질문 등록에 실패함:\", error);\r\n        // 필요한 에러 처리 로직을 추가합니다.\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"popupWrap\">\r\n      <div className=\"popup registerPopup\">\r\n        <div className=\"popupContainer\">\r\n          <div className=\"popupHeader\">\r\n            <img src={Close} alt=\"close\" onClick={onClose} />\r\n          </div>\r\n          <div className=\"popupContent\">\r\n            <div className=\"profile\">\r\n              <div>\r\n                <img src={randomImage} alt=\"profile\" />\r\n              </div>\r\n              <div>\r\n                {btn ? (\r\n                  <>\r\n                    <p className=\"myId\">익명의 토끼</p>\r\n                    <button className=\"openBtn\" onClick={clickOpenBtn}>\r\n                    <span role=\"img\" aria-label=\"link\">\r\n                     🐰 토끼로 녹아들기\r\n                     </span>\r\n                    </button>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <p className=\"myId\">{currentUserInfo.name}</p>\r\n                    <button className=\"openBtn\" onClick={clickOpenBtn}>\r\n                    <span role=\"img\" aria-label=\"link\">\r\n                     👤 공개 무물하기\r\n                     </span>\r\n                    </button>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"text\">\r\n              <textarea maxLength=\"500\" onChange={onTextareaHandler} />\r\n            </div>\r\n          </div>\r\n          <div className=\"popupFooter\">\r\n            <p className=\"countNum\">\r\n              <span>{inputCount}</span>\r\n              <span>/500</span>\r\n            </p>\r\n            <button className=\"btnSave\" onClick={registerQuestion}>\r\n              남기기\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nQuestionRegister.propTypes={\r\n  onClose: PropTypes.any.isRequired,\r\n  info: PropTypes.any.isRequired,  \r\n  currentUserInfo: PropTypes.any.isRequired,  \r\n}\r\n\r\nexport default QuestionRegister;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}