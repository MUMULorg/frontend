{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Header from\"../component/Header\";import SendComment from\"../component/SendComment\";import ReceiveComment from\"../component/ReceiveComment\";import MyProfile from\"../component/MyProfile\";import QuestionerProfile from\"../component/QuestionerProfile\";import{useParams}from\"react-router-dom\";import{getSpaceInfo}from\"../api/getSpaceInfo\";import{getUserInfo}from\"../api/getUserInfo\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Main(_ref){let{isLogin,setIsLogin,followSelected,setFollowSelected}=_ref;const{id}=useParams();const[isNotFound,setIsNotFound]=useState(true);const[info,setInfo]=useState({userId:'',picture:'',name:'',introduce:'',instaId:'',link:'',spaceStop:'',alertSpace:''});const[currentUserInfo,setCurrentUserInfo]=useState({userId:'',picture:'',name:'',introduce:'',instaId:'',link:'',spaceStop:''});useEffect(()=>{const initUserInfo=async()=>{const newInfo=await getSpaceInfo(id);const token=localStorage.getItem('token');if(token!==null){const userInfo=await getUserInfo();if(userInfo===false){setIsLogin(false);}setCurrentUserInfo(userInfo);}if(newInfo===false){setIsNotFound(true);}else{setIsNotFound(false);setInfo(newInfo);}};initUserInfo();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[id,isLogin,followSelected]);const[activeIndex,setActiveIndex]=useState(0);const tabContArr=[{id:0,tabTitle:\"받은 무물\",tabCont:/*#__PURE__*/_jsx(ReceiveComment,{spaceId:id,currentUserInfo:currentUserInfo})},{id:1,tabTitle:\"보낸 무물\",tabCont:/*#__PURE__*/_jsx(SendComment,{spaceId:id,currentUserInfo:currentUserInfo})}];return/*#__PURE__*/_jsx(\"div\",{className:\"wrap\",children:isNotFound?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrap\",children:[/*#__PURE__*/_jsx(Header,{isLogin:isLogin,setIsLogin:setIsLogin,currentUserInfo:currentUserInfo}),/*#__PURE__*/_jsxs(\"div\",{className:\"contentWrap\",children:[currentUserInfo.userId===info.userId?/*#__PURE__*/_jsx(MyProfile,{currentUserInfo:currentUserInfo,followSelected:followSelected,setFollowSelected:setFollowSelected}):/*#__PURE__*/_jsx(QuestionerProfile,{spaceUserInfo:info,currentUserInfo:currentUserInfo,followSelected:followSelected,setFollowSelected:setFollowSelected,isLogin:isLogin}),/*#__PURE__*/_jsx(\"ul\",{className:\"tabMenu\",children:tabContArr.map(item=>/*#__PURE__*/_jsx(\"li\",{className:activeIndex===item.id?\"is-active\":\"\",onClick:()=>setActiveIndex(item.id),children:item.tabTitle},item.id))}),/*#__PURE__*/_jsx(\"div\",{children:tabContArr.filter(item=>activeIndex===item.id).map(item=>/*#__PURE__*/_jsx(\"div\",{children:item.tabCont},item.id))})]})]})})});}export default Main;","map":{"version":3,"names":["React","useState","useEffect","Header","SendComment","ReceiveComment","MyProfile","QuestionerProfile","useParams","getSpaceInfo","getUserInfo","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Main","_ref","isLogin","setIsLogin","followSelected","setFollowSelected","id","isNotFound","setIsNotFound","info","setInfo","userId","picture","name","introduce","instaId","link","spaceStop","alertSpace","currentUserInfo","setCurrentUserInfo","initUserInfo","newInfo","token","localStorage","getItem","userInfo","activeIndex","setActiveIndex","tabContArr","tabTitle","tabCont","spaceId","className","children","spaceUserInfo","map","item","onClick","filter"],"sources":["C:/Users/PC/Desktop/mumul_frontend/mumul/src/pages/Main.js"],"sourcesContent":["import React, { useState, useEffect} from \"react\";\r\nimport Header from \"../component/Header\";\r\nimport SendComment from \"../component/SendComment\";\r\nimport ReceiveComment from \"../component/ReceiveComment\";\r\nimport MyProfile from \"../component/MyProfile\";\r\nimport QuestionerProfile from \"../component/QuestionerProfile\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { getSpaceInfo } from \"../api/getSpaceInfo\";\r\nimport { getUserInfo } from \"../api/getUserInfo\";\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Main({isLogin, setIsLogin, followSelected, setFollowSelected}) {\r\n  const { id } = useParams();\r\n\r\n  const [isNotFound, setIsNotFound] = useState(true);\r\n\r\n  const [info, setInfo] = useState({\r\n    userId: '',\r\n    picture: '',\r\n    name: '',\r\n    introduce: '',\r\n    instaId: '',\r\n    link: '',\r\n    spaceStop: '',\r\n    alertSpace: '',\r\n  });\r\n  const [currentUserInfo, setCurrentUserInfo] = useState({\r\n    userId: '',\r\n    picture: '',\r\n    name: '',\r\n    introduce: '',\r\n    instaId: '',\r\n    link: '',\r\n    spaceStop: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    const initUserInfo = async () => {\r\n      const newInfo = await getSpaceInfo(id);\r\n      const token = localStorage.getItem('token');\r\n  \r\n      if (token !== null) {\r\n        const userInfo = await getUserInfo();\r\n        if(userInfo === false) {\r\n          setIsLogin(false);\r\n        }\r\n        setCurrentUserInfo(userInfo);\r\n      }\r\n      if (newInfo === false) {\r\n        setIsNotFound(true);\r\n      } else {\r\n        setIsNotFound(false);\r\n        setInfo(newInfo);\r\n      }\r\n    };\r\n  \r\n    initUserInfo();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [id, isLogin, followSelected]);\r\n  \r\n\r\n  const [activeIndex, setActiveIndex] = useState(0);\r\n\r\n  const tabContArr = [\r\n    {\r\n      id: 0,\r\n      tabTitle: \"받은 무물\",\r\n      tabCont: <ReceiveComment spaceId={id} currentUserInfo={currentUserInfo}></ReceiveComment>,\r\n    },\r\n    {\r\n      id: 1,\r\n      tabTitle: \"보낸 무물\",\r\n      tabCont: <SendComment spaceId={id} currentUserInfo={currentUserInfo}></SendComment>,\r\n    },\r\n  ];\r\n\r\n\r\n  return (\r\n    <div className=\"wrap\">\r\n      {isNotFound ? (\r\n        <div></div>\r\n      ) : (\r\n        <>\r\n      <div className=\"wrap\">\r\n      <Header isLogin={isLogin} setIsLogin={setIsLogin} currentUserInfo={currentUserInfo}></Header>\r\n      <div className=\"contentWrap\">\r\n        {/* <Storyslide spaceId={id} followSelected={followSelected}></Storyslide> */}\r\n        {currentUserInfo.userId === info.userId ? (\r\n            <MyProfile currentUserInfo={currentUserInfo}\r\n            followSelected={followSelected} setFollowSelected={setFollowSelected}></MyProfile>\r\n          ) : (\r\n            <QuestionerProfile spaceUserInfo={info} currentUserInfo={currentUserInfo} \r\n            followSelected={followSelected} setFollowSelected={setFollowSelected}\r\n            isLogin={isLogin}></QuestionerProfile>\r\n        )}\r\n        <ul className=\"tabMenu\">\r\n          {tabContArr.map((item) => (\r\n            <li\r\n              className={activeIndex === item.id ? \"is-active\" : \"\"}\r\n              onClick={() => setActiveIndex(item.id)}\r\n              key={item.id}\r\n            >\r\n              {item.tabTitle}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <div>\r\n          {tabContArr\r\n            .filter((item) => activeIndex === item.id)\r\n            .map((item) => (\r\n              <div key={item.id}>{item.tabCont}</div>\r\n            ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nMain.propTypes={\r\n  isLogin: PropTypes.any.isRequired,\r\n  setIsLogin: PropTypes.any.isRequired,\r\n  followSelected: PropTypes.any.isRequired,  \r\n  setFollowSelected: PropTypes.any.isRequired,    \r\n}\r\nexport default Main;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CACjD,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,cAAc,KAAM,6BAA6B,CACxD,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,iBAAiB,KAAM,gCAAgC,CAC9D,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,YAAY,KAAQ,qBAAqB,CAClD,OAASC,WAAW,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAGjD,QAAS,CAAAC,IAAIA,CAAAC,IAAA,CAA2D,IAA1D,CAACC,OAAO,CAAEC,UAAU,CAAEC,cAAc,CAAEC,iBAAiB,CAAC,CAAAJ,IAAA,CACpE,KAAM,CAAEK,EAAG,CAAC,CAAGf,SAAS,CAAC,CAAC,CAE1B,KAAM,CAACgB,UAAU,CAAEC,aAAa,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAElD,KAAM,CAACyB,IAAI,CAAEC,OAAO,CAAC,CAAG1B,QAAQ,CAAC,CAC/B2B,MAAM,CAAE,EAAE,CACVC,OAAO,CAAE,EAAE,CACXC,IAAI,CAAE,EAAE,CACRC,SAAS,CAAE,EAAE,CACbC,OAAO,CAAE,EAAE,CACXC,IAAI,CAAE,EAAE,CACRC,SAAS,CAAE,EAAE,CACbC,UAAU,CAAE,EACd,CAAC,CAAC,CACF,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAGpC,QAAQ,CAAC,CACrD2B,MAAM,CAAE,EAAE,CACVC,OAAO,CAAE,EAAE,CACXC,IAAI,CAAE,EAAE,CACRC,SAAS,CAAE,EAAE,CACbC,OAAO,CAAE,EAAE,CACXC,IAAI,CAAE,EAAE,CACRC,SAAS,CAAE,EACb,CAAC,CAAC,CAEFhC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAA9B,YAAY,CAACc,EAAE,CAAC,CACtC,KAAM,CAAAiB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAIF,KAAK,GAAK,IAAI,CAAE,CAClB,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAjC,WAAW,CAAC,CAAC,CACpC,GAAGiC,QAAQ,GAAK,KAAK,CAAE,CACrBvB,UAAU,CAAC,KAAK,CAAC,CACnB,CACAiB,kBAAkB,CAACM,QAAQ,CAAC,CAC9B,CACA,GAAIJ,OAAO,GAAK,KAAK,CAAE,CACrBd,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,CACLA,aAAa,CAAC,KAAK,CAAC,CACpBE,OAAO,CAACY,OAAO,CAAC,CAClB,CACF,CAAC,CAEDD,YAAY,CAAC,CAAC,CACd;AACF,CAAC,CAAE,CAACf,EAAE,CAAEJ,OAAO,CAAEE,cAAc,CAAC,CAAC,CAGjC,KAAM,CAACuB,WAAW,CAAEC,cAAc,CAAC,CAAG5C,QAAQ,CAAC,CAAC,CAAC,CAEjD,KAAM,CAAA6C,UAAU,CAAG,CACjB,CACEvB,EAAE,CAAE,CAAC,CACLwB,QAAQ,CAAE,OAAO,CACjBC,OAAO,cAAEpC,IAAA,CAACP,cAAc,EAAC4C,OAAO,CAAE1B,EAAG,CAACa,eAAe,CAAEA,eAAgB,CAAiB,CAC1F,CAAC,CACD,CACEb,EAAE,CAAE,CAAC,CACLwB,QAAQ,CAAE,OAAO,CACjBC,OAAO,cAAEpC,IAAA,CAACR,WAAW,EAAC6C,OAAO,CAAE1B,EAAG,CAACa,eAAe,CAAEA,eAAgB,CAAc,CACpF,CAAC,CACF,CAGD,mBACExB,IAAA,QAAKsC,SAAS,CAAC,MAAM,CAAAC,QAAA,CAClB3B,UAAU,cACTZ,IAAA,SAAU,CAAC,cAEXA,IAAA,CAAAI,SAAA,EAAAmC,QAAA,cACFrC,KAAA,QAAKoC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACrBvC,IAAA,CAACT,MAAM,EAACgB,OAAO,CAAEA,OAAQ,CAACC,UAAU,CAAEA,UAAW,CAACgB,eAAe,CAAEA,eAAgB,CAAS,CAAC,cAC7FtB,KAAA,QAAKoC,SAAS,CAAC,aAAa,CAAAC,QAAA,EAEzBf,eAAe,CAACR,MAAM,GAAKF,IAAI,CAACE,MAAM,cACnChB,IAAA,CAACN,SAAS,EAAC8B,eAAe,CAAEA,eAAgB,CAC5Cf,cAAc,CAAEA,cAAe,CAACC,iBAAiB,CAAEA,iBAAkB,CAAY,CAAC,cAElFV,IAAA,CAACL,iBAAiB,EAAC6C,aAAa,CAAE1B,IAAK,CAACU,eAAe,CAAEA,eAAgB,CACzEf,cAAc,CAAEA,cAAe,CAACC,iBAAiB,CAAEA,iBAAkB,CACrEH,OAAO,CAAEA,OAAQ,CAAoB,CACxC,cACDP,IAAA,OAAIsC,SAAS,CAAC,SAAS,CAAAC,QAAA,CACpBL,UAAU,CAACO,GAAG,CAAEC,IAAI,eACnB1C,IAAA,OACEsC,SAAS,CAAEN,WAAW,GAAKU,IAAI,CAAC/B,EAAE,CAAG,WAAW,CAAG,EAAG,CACtDgC,OAAO,CAAEA,CAAA,GAAMV,cAAc,CAACS,IAAI,CAAC/B,EAAE,CAAE,CAAA4B,QAAA,CAGtCG,IAAI,CAACP,QAAQ,EAFTO,IAAI,CAAC/B,EAGR,CACL,CAAC,CACA,CAAC,cACLX,IAAA,QAAAuC,QAAA,CACGL,UAAU,CACRU,MAAM,CAAEF,IAAI,EAAKV,WAAW,GAAKU,IAAI,CAAC/B,EAAE,CAAC,CACzC8B,GAAG,CAAEC,IAAI,eACR1C,IAAA,QAAAuC,QAAA,CAAoBG,IAAI,CAACN,OAAO,EAAtBM,IAAI,CAAC/B,EAAuB,CACvC,CAAC,CACD,CAAC,EACH,CAAC,EACH,CAAC,CACA,CACH,CACE,CAAC,CAEV,CAQA,cAAe,CAAAN,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}