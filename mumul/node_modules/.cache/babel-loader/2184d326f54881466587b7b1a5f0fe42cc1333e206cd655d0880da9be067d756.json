{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{logoutUserToken}from\"../api/logoutUserToken\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Header(_ref){let{isLogin,setIsLogin,currentUserInfo}=_ref;const[modal,setModal]=useState(false);const profileRef=useRef(null);const handleClickOutside=event=>{if(profileRef.current&&!profileRef.current.contains(event.target)){setModal(false);}};const handleProfileClick=()=>{setModal(!modal);};const handleMumulClick=()=>{window.location.href=\"http://mumul.site\";};useEffect(()=>{// document 객체에 클릭 이벤트 리스너 등록\ndocument.addEventListener(\"click\",handleClickOutside);return()=>{// 컴포넌트가 언마운트 될 때 이벤트 리스너 제거\ndocument.removeEventListener(\"click\",handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",onClick:handleMumulClick,children:\"MUMUL\"}),/*#__PURE__*/_jsx(\"div\",{className:\"profile\",ref:profileRef,children:isLogin===true?/*#__PURE__*/_jsx(\"img\",{src:currentUserInfo.picture,alt:\"profile\",onClick:handleProfileClick}):/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"loginBtn\",children:\"\\uB85C\\uADF8\\uC778\"})}),modal&&/*#__PURE__*/_jsx(HeaderPopup,{isLogin:isLogin,setIsLogin:setIsLogin,currentUserInfo:currentUserInfo})]});}function HeaderPopup(_ref2){let{isLogin,setIsLogin,currentUserInfo}=_ref2;const handleLogout=async()=>{try{const result=await logoutUserToken();if(result){// 로그아웃 성공\nsetIsLogin(false);window.location.href='/login';}}catch(error){console.error(\"로그아웃 오류: \",error.message);}};const handleClickMySpace=()=>{if(currentUserInfo.userId===''){alert(\"로그인 하세요.\");return;}};return/*#__PURE__*/_jsxs(\"ul\",{className:\"headerPopup\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list\",onClick:handleClickMySpace,children:/*#__PURE__*/_jsx(Link,{to:isLogin!==false?'/'+currentUserInfo.userId:'#',onClick:e=>{if(isLogin!==false&&window.location.pathname==='/'+currentUserInfo.userId){e.preventDefault();// Prevent the default link behavior\nwindow.location.reload();// Force a page reload\n}},children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uB0B4 \\uC2A4\\uD398\\uC774\\uC2A4\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list\",onClick:()=>{if(isLogin!==false)handleLogout();},children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"p\",{children:isLogin?\"로그아웃\":\"로그인\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list\",onClick:handleClickMySpace,children:/*#__PURE__*/_jsx(Link,{to:currentUserInfo.userId!==''?'/setting':'#',children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC124\\uC815\"})})})]});}export default Header;","map":{"version":3,"names":["React","useState","useRef","useEffect","Link","logoutUserToken","jsx","_jsx","jsxs","_jsxs","Header","_ref","isLogin","setIsLogin","currentUserInfo","modal","setModal","profileRef","handleClickOutside","event","current","contains","target","handleProfileClick","handleMumulClick","window","location","href","document","addEventListener","removeEventListener","className","children","onClick","ref","src","picture","alt","to","HeaderPopup","_ref2","handleLogout","result","error","console","message","handleClickMySpace","userId","alert","e","pathname","preventDefault","reload"],"sources":["C:/Users/PC/Desktop/mumul_frontend/mumul/src/component/Header.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { logoutUserToken } from \"../api/logoutUserToken\";\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nfunction Header({ isLogin, setIsLogin, currentUserInfo }) {\r\n  \r\n  const [modal, setModal] = useState(false);\r\n  const profileRef = useRef(null);\r\n\r\n  const handleClickOutside = (event) => {\r\n    if (profileRef.current && !profileRef.current.contains(event.target)) {\r\n      setModal(false);\r\n    }\r\n  };\r\n\r\n  const handleProfileClick = () => {\r\n    setModal(!modal);\r\n  };\r\n\r\n  const handleMumulClick = () => {\r\n    window.location.href = \"http://mumul.site\";\r\n  };\r\n\r\n  useEffect(() => {\r\n    // document 객체에 클릭 이벤트 리스너 등록\r\n    document.addEventListener(\"click\", handleClickOutside);\r\n    return () => {\r\n      // 컴포넌트가 언마운트 될 때 이벤트 리스너 제거\r\n      document.removeEventListener(\"click\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <header className=\"header\">\r\n       <h1 className=\"title\" onClick={handleMumulClick}>MUMUL</h1>\r\n      <div className=\"profile\" ref={profileRef}>\r\n        {isLogin === true ? (\r\n          <img\r\n            src={ currentUserInfo.picture}\r\n            alt=\"profile\"\r\n            onClick={handleProfileClick}\r\n          />\r\n        ):(\r\n          <Link to=\"/login\" className=\"loginBtn\">\r\n            로그인\r\n          </Link>\r\n        )}\r\n      </div>\r\n      {modal && (\r\n        <HeaderPopup\r\n          isLogin={isLogin}\r\n          setIsLogin={setIsLogin}\r\n          currentUserInfo={currentUserInfo}\r\n        />\r\n      )}\r\n    </header>\r\n  );\r\n  \r\n}\r\n\r\n\r\nfunction HeaderPopup({ isLogin, setIsLogin, currentUserInfo }) {\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const result = await logoutUserToken();\r\n      if (result) {\r\n        // 로그아웃 성공\r\n        setIsLogin(false);\r\n        window.location.href = '/login';\r\n      } \r\n    } catch (error) {\r\n      console.error(\"로그아웃 오류: \", error.message);\r\n    }\r\n  };\r\n\r\n  const handleClickMySpace = () => {\r\n    if (currentUserInfo.userId === '') {\r\n      alert(\"로그인 하세요.\");\r\n      return;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ul className=\"headerPopup\">\r\n      <li className=\"list\" onClick={handleClickMySpace}>\r\n      <Link to={isLogin !== false ? '/' + currentUserInfo.userId : '#'} onClick={(e) => {\r\n        if (isLogin !== false && window.location.pathname === '/' + currentUserInfo.userId) {\r\n          e.preventDefault(); // Prevent the default link behavior\r\n          window.location.reload(); // Force a page reload\r\n        }\r\n      }}>\r\n        <p>내 스페이스</p>\r\n      </Link>\r\n  </li>\r\n\r\n      <li className=\"list\" onClick={() => { if(isLogin !== false) handleLogout(); }}>\r\n        <Link to=\"/login\">\r\n          <p>{isLogin ? \"로그아웃\" : \"로그인\"}</p>\r\n        </Link>\r\n      </li>\r\n      <li className=\"list\" onClick={handleClickMySpace}>\r\n        <Link to={currentUserInfo.userId !== '' ? '/setting' : '#'}>\r\n          <p>설정</p>\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n}\r\n\r\n\r\nHeader.propTypes = {\r\n  isLogin: PropTypes.any.isRequired,\r\n  setIsLogin: PropTypes.any.isRequired,\r\n  currentUserInfo: PropTypes.any.isRequired,\r\n};\r\n\r\nHeaderPopup.propTypes = {\r\n  isLogin: PropTypes.any.isRequired,\r\n  setIsLogin: PropTypes.any.isRequired,\r\n  currentUserInfo: PropTypes.any.isRequired,\r\n};\r\n\r\n\r\nexport default Header;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}